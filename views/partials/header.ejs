<!-- header.ejs -->
<header class="header-bar">
  <!-- Group 1: Home + Search -->
  <div class="header-left">
    <div class="home-btn">
      <a href="https://topsify.onrender.com/home">
        <img src="https://cdn-icons-png.flaticon.com/128/14035/14035684.png" alt="Home" />
      </a>
    </div>
    <form method="POST" class="search-form">
      <input type="text" name="search" placeholder="Search" />
    </form>
  </div>

  <!-- Group 2: Welcome Message -->
  <div class="header-center">
    <% if (locals.username) { %>
      <h3>Welcome <%= username %>, to Topsify</h3>
    <% } %>
  </div>

  <!-- Group 3: Create Playlist + Show All -->
  <div class="header-right">
    <div class="add-btn">
      <img
        src="https://cdn-icons-png.flaticon.com/128/10015/10015328.png"
        alt="Create A Playlist"
        id="addPlaylistImg"
      />
    </div>
    <div class="show-all-btn">
      <!-- <form action="/playlists" method="GET"> -->
        <button type="submit">Show All Playlists</button>
      <!-- </form> -->
    </div>
  </div>

   <!-- Playlist Modal -->
    <div id="playlistModal" class="modal">
      <div class="modal-content">
        <span id="closeModal" class="close">&times;</span>
        <form id="playlistForm" action="/create/add" method="POST">
          <label for="playlistName">Playlist Name:</label>
          <input type="text" id="playlistName" name="playlistName" required />
    
          <!-- <label for="songs">Add Songs (Optional):</label>
          <select id="songs" name="songs" multiple>
            <%# songs.forEach(song => { %>
              <option value="<%#= song.id %>"><%#= song.name %></option>
            <%# }) %>
          </select> -->
    
          <button type="submit">Create Playlist</button>
        </form>
      </div>
    </div>
    <script>
      const modal = document.getElementById("playlistModal");
      const img = document.getElementById("addPlaylistImg");
      const close = document.getElementById("closeModal");
    
      // Show the modal when the image is clicked
      img.onclick = function () {
        modal.style.display = "block";
      };
    
      // Close the modal when the close button is clicked
      close.onclick = function () {
        modal.style.display = "none";
      };
    
      // Close the modal if the user clicks outside the modal content
      window.onclick = function (event) {
        if (event.target == modal) {
          modal.style.display = "none";
        }
      };
    
      // AJAX Form Submission
      /*const form = document.getElementById("playlistForm");
      form.onsubmit = async function (e) {
        e.preventDefault();
        const formData = new FormData(form);
        const formObject = {};
        formData.forEach((value, key) => {
          formObject[key] = value;
        });
      
        console.log("Form data:", formObject); 
        const response = await fetch("/create/add", {
          method: "POST",
          body: formData,
        });

        if (response.ok) {
          alert("Playlist created successfully!");
          modal.style.display = "none";
    
          // Optionally reload the song list or update the UI dynamically
        } else {
          alert("Error creating playlist.");
        }
      }; */
    </script>
    
    <!-- <div class="show-all-btn">
      <button>Show All Playlists</button>
    </div> -->
</header>

